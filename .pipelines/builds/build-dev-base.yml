name: $(Date:yyyyMMdd).$(Rev:.r)
resources:
  repositories:
  - repository: vmchooserlandscaping
    type: github
    name: vmchooser/landscaping
    endpoint: vmchooser
trigger:
  batch: true
  branches:
    include:
    - master
  paths:
    include:
    - /terraform/
    - /.pipelines/templates/tf*
jobs:
- job: LandScaping_Build_Dev
  variables:
  - group: vmchooser
  pool:
    name: Default
  steps:
  - template: ../templates/tf-environment-build.yml
    parameters:
      varfile: dev.tfvars
- job: LandScaping_Deploy_Dev
  variables:
  - group: vmchooser
  dependsOn: LandScaping_Build_Dev
  pool:
    name: Default
  steps:
  - template: ../templates/tf-environment-deploy.yml
    parameters:
      varfile: dev.tfvars